<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- DYNAMIC: These will be updated by JavaScript based on project -->
    <meta name="description" content="Professional construction project details | JS Brixen">

    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="Project Details | JS Brixen">
    <meta property="og:description" content="Explore our construction projects in Kerala & Karnataka">
    <meta property="og:type" content="website">
    <meta property="og:image" content="https://images.unsplash.com/photo-1600585154340-be6161a56a0c?w=1200&q=80">

    <title>Project Details | JS Brixen</title>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <!-- Stylesheet -->
    <link rel="stylesheet" href="assets/css/styles.css">

    <!-- Favicon -->
    <link rel="icon" type="image/png" href="favicon.png">
    <link rel="shortcut icon" href="favicon.ico">
    <link rel="stylesheet" href="assets/css/projects.css">

    <!-- JSON-LD Structured Data (Will be populated by JavaScript) -->
    <script type="application/ld+json" id="project-ld-json">
    {
      "@context": "https://schema.org",
      "@type": "CreativeWork",
      "name": "Construction Project",
      "description": "Professional construction project",
      "creator": {
        "@type": "Organization",
        "name": "JS Brixen",
        "url": "https://jsconstruction.com"
      },
      "areaServed": ["Kerala", "Karnataka"]
    }
    </script>
</head>

<body>
    <!-- Skip Link for Accessibility -->
    <a href="#main-content" class="skip-link">Skip to main content</a>

    <!-- Header -->
    <header class="header">
        <div class="container header__inner">
            <a class="logo" href="index.html">
                <img src="assets/images/js-logo.png" alt="JS Brixen" style="height: 60px; margin-right: 12px;">
                <span class="logo-text">JS Brixen</span>
            </a>
            <button class="nav-toggle" aria-label="Toggle navigation" aria-expanded="false">â˜°</button>
            <nav class="nav">
                <a href="index.html" class="nav__link">Home</a>
                <a href="services.html" class="nav__link">Services</a>
                <a href="projects.html" class="nav__link nav__link--active">Projects</a>
                <a href="book-consultation.html" class="nav__link">Book Consultation</a>
                <a href="about.html" class="nav__link">About</a>
                <a href="contact.html" class="nav__link">Contact</a>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <main id="main-content">
        <!-- Hero Carousel -->
        <section class="project-hero">
            <div class="project-hero__carousel">
                <!-- Slides will be populated by JavaScript -->
            </div>
            <div class="project-hero__controls">
                <button class="carousel-prev" aria-label="Previous image">â€¹</button>
                <button class="carousel-next" aria-label="Next image">â€º</button>
                <div class="carousel-dots"></div>
            </div>
        </section>

        <!-- Content Layout: 2-column on desktop -->
        <div class="project-content container">
            <article class="project-main">
                <!-- Breadcrumb -->
                <nav aria-label="Breadcrumb" class="breadcrumb">
                    <a href="projects.html">Projects</a> / <span id="project-title-breadcrumb">Loading...</span>
                </nav>

                <!-- Metadata Panel -->
                <div class="project-meta">
                    <h1 id="project-title">Loading Project...</h1>
                    <span class="project-type-badge" id="project-type">Loading...</span>
                    <dl class="project-details">
                        <dt>Location</dt>
                        <dd id="project-district">â€”</dd>
                        <dt>Area</dt>
                        <dd id="project-area">â€”</dd>
                        <dt>Duration</dt>
                        <dd id="project-duration">â€”</dd>
                        <dt>Completed</dt>
                        <dd id="project-year">â€”</dd>
                    </dl>
                </div>

                <!-- Full Description -->
                <div class="project-description" id="project-description">
                    <p>Loading project details...</p>
                </div>

                <!-- Gallery Grid -->
                <section class="project-gallery">
                    <h2>Project Gallery</h2>
                    <div class="gallery-grid" id="gallery-grid">
                        <!-- Gallery items will be populated by JavaScript -->
                    </div>
                </section>

                <!-- Related Services -->
                <section class="project-services">
                    <h2>Services Provided</h2>
                    <ul id="project-services-list">
                        <li>Loading...</li>
                    </ul>
                </section>

                <!-- Social Share -->
                <div class="project-share">
                    <h3 style="width: 100%; margin-bottom: var(--spacing-sm);">Share this project</h3>
                    <button class="share-btn" data-action="copy">ðŸ”— Copy Link</button>
                    <a href="#" class="share-btn" data-action="whatsapp" target="_blank" rel="noopener">WhatsApp</a>
                    <a href="#" class="share-btn" data-action="twitter" target="_blank" rel="noopener">Twitter</a>
                    <a href="#" class="share-btn" data-action="facebook" target="_blank" rel="noopener">Facebook</a>
                </div>
            </article>

            <!-- Sticky Sidebar CTA (desktop) -->
            <aside class="project-sidebar">
                <div class="sticky-cta-panel">
                    <h3>Interested in this project?</h3>
                    <p>Let's discuss how we can create something similar for you.</p>
                    <a href="#" id="cta-consultation" class="btn-primary btn-lg">ðŸ“… Book Free Consultation</a>
                    <a href="tel:+91XXXXXXXXXX" class="btn-secondary-outline">ðŸ“ž Call Now</a>
                </div>
            </aside>
        </div>
    </main>

    <!-- Mobile Sticky CTA -->
    <div class="mobile-sticky-cta">
        <a href="#" id="mobile-cta-consultation" class="btn-primary btn-full">ðŸ“… Book Free Consultation</a>
    </div>

    <!-- Lightbox Modal (Hidden by Default) -->
    <div class="lightbox" role="dialog" aria-modal="true" aria-label="Image gallery" hidden>
        <div class="lightbox__backdrop"></div>
        <div class="lightbox__container">
            <button class="lightbox__close" aria-label="Close gallery">Ã—</button>
            <button class="lightbox__prev" aria-label="Previous image">â€¹</button>
            <img class="lightbox__image" src="" alt="">
            <button class="lightbox__next" aria-label="Next image">â€º</button>
            <div class="lightbox__counter" aria-live="polite">1 / 1</div>
            <div class="lightbox__caption"></div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer__inner">
                <div class="footer__section">
                    <h3>JS Brixen</h3>
                    <p>Building dreams across Kerala & Karnataka with quality, trust, and expertise.</p>
                </div>
                <div class="footer__section">
                    <h3>Quick Links</h3>
                    <ul class="footer__links">
                        <li><a href="services.html">Services</a></li>
                        <li><a href="projects.html">Projects</a></li>
                        <li><a href="book-consultation.html">Book Consultation</a></li>
                        <li><a href="about.html">About Us</a></li>
                        <li><a href="contact.html">Contact</a></li>
                    </ul>
                </div>
                <div class="footer__section">
                    <h3>Contact</h3>
                    <ul class="footer__links">
                        <li><a href="tel:+91XXXXXXXXXX">ðŸ“ž +91 XXXXXXXXXX</a></li>
                        <li><a href="mailto:info@jsconstruction.com">ðŸ“§ info@jsconstruction.com</a></li>
                        <li><a href="https://wa.me/91XXXXXXXXXX">ðŸ’¬ WhatsApp</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer__copyright">
                <p>&copy; 2026 JS Brixen. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- JavaScript -->
    <script src="assets/js/main.js"></script>
    <script src="assets/js/projects.js"></script>

    <!--
    ===== FIRESTORE INTEGRATION GUIDE =====

    To integrate with Firestore, replace the project data loading in projects.js with:

    async function initProjectDetail() {
      const params = new URLSearchParams(window.location.search);
      const projectSlug = params.get('project');

      if (!projectSlug) {
        window.location.href = '/projects.html';
        return;
      }

      // Fetch from Firestore
      const db = firebase.firestore();
      const doc = await db.collection('projects').doc(projectSlug).get();

      if (!doc.exists) {
        window.location.href = '/projects.html';
        return;
      }

      const projectData = { id: doc.id, ...doc.data() };
      populateProjectPage(projectData);

      // Increment view count via Cloud Function (recommended)
      // Call your Cloud Function here to safely increment views
      // await fetch(`/api/incrementProjectViews?slug=${projectSlug}`, { method: 'POST' });
    }

    The data structure in Firestore should match the PROJECTS array structure in projects.js.

    CLOUDINARY INTEGRATION:
    - Upload images to Cloudinary via Admin App
    - Store returned secure_url in projects.images[] array
    - Use transformation parameters for responsive images:
      * Card covers: c_fill,w_600,h_450,q_auto,f_auto
      * Hero carousel: c_fill,w_1600,h_900,q_auto,f_auto
      * Gallery thumbs: c_fill,w_400,h_300,q_auto,f_auto
      * Lightbox: w_1920,q_auto,f_auto

    VIEW COUNT IMPLEMENTATION:
    - DO NOT increment views directly from client (can be abused)
    - Use Cloud Function triggered by HTTP request
    - Implement rate limiting (e.g., 1 view per IP per project per day)
    - Example Cloud Function:
      exports.incrementProjectViews = functions.https.onRequest(async (req, res) => {
        const slug = req.query.slug;
        const projectRef = admin.firestore().collection('projects').doc(slug);
        await projectRef.update({ views: admin.firestore.FieldValue.increment(1) });
        res.json({ success: true });
      });
    -->
</body>

</html>

